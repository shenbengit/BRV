
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="BRV框架文档">
      
      
        <meta name="author" content="drake">
      
      
      
        <link rel="prev" href="../state/">
      
      
        <link rel="next" href="../refresh-animate/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.3, mkdocs-material-9.1.14">
    
    
      
        <title>Pull-to-Refresh/Load-more - BRV</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.85bb2934.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.a6bdf11c.min.css">
      
      

    
    
    
      
    
    
      <link rel="stylesheet" href="../css/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="drake" data-md-color-primary="white" data-md-color-accent="indigo">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#initialization" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="BRV" class="md-header__button md-logo" aria-label="BRV" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            BRV
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Pull-to-Refresh/Load-more
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/liangjingkanji/BRV" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="BRV" class="md-nav__button md-logo" aria-label="BRV" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    BRV
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/liangjingkanji/BRV" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Usage
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../multi-type/" class="md-nav__link">
        Multi-type
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../refresh-data/" class="md-nav__link">
        Data Refresh
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../click/" class="md-nav__link">
        Click Event
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../lifecycle/" class="md-nav__link">
        Lifecycle
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../performance/" class="md-nav__link">
        Smooth Scrolling
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../header_footer/" class="md-nav__link">
        Header/Footer Layout
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../group/" class="md-nav__link">
        Grouping
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../hover/" class="md-nav__link">
        Hover
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
      
      
      
        <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
          Dividers
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          Dividers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../divider-linear/" class="md-nav__link">
        Linear List
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../divider-grid/" class="md-nav__link">
        Grid List
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../divider-staggerd/" class="md-nav__link">
        Staggered Grid List
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../divider-other/" class="md-nav__link">
        Custom
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../state/" class="md-nav__link">
        Empty State
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Pull-to-Refresh/Load-more
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Pull-to-Refresh/Load-more
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#initialization" class="md-nav__link">
    Initialization
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pagerefreshlayout" class="md-nav__link">
    PageRefreshLayout
  </a>
  
    <nav class="md-nav" aria-label="PageRefreshLayout">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#declaration" class="md-nav__link">
    Declaration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-the-list" class="md-nav__link">
    Create the List
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#listen-for-state-changes" class="md-nav__link">
    Listen for State Changes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trigger-refresh" class="md-nav__link">
    Trigger Refresh
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#empty-state" class="md-nav__link">
    Empty State
  </a>
  
    <nav class="md-nav" aria-label="Empty State">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#global-empty-state-configuration" class="md-nav__link">
    Global Empty State Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#singleton-empty-state-configuration" class="md-nav__link">
    Singleton Empty State Configuration
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#refreshing-data" class="md-nav__link">
    Refreshing Data
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#disable-pull-to-refresh-in-empty-state" class="md-nav__link">
    Disable Pull-to-Refresh in Empty State
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../refresh-animate/" class="md-nav__link">
        Refresh Animation
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../upfetch/" class="md-nav__link">
        Upfetch
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../preload/" class="md-nav__link">
        Preload
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../toggle/" class="md-nav__link">
        Mode Switching
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../checked/" class="md-nav__link">
        Selection Mode
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../flexbox/" class="md-nav__link">
        Flexbox Layout
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../drag/" class="md-nav__link">
        Drag and Drop
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../swipe/" class="md-nav__link">
        Swipe
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../animation/" class="md-nav__link">
        List Animation
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../item/" class="md-nav__link">
        Data Interfaces
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../recycle/" class="md-nav__link">
        Recycle List
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../extension/" class="md-nav__link">
        Extension Functions
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../net/" class="md-nav__link">
        Network Requests
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../view-binding/" class="md-nav__link">
        ViewBinding
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../issues/" class="md-nav__link">
        FAQ
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../component/" class="md-nav__link">
        Third-Party Components
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../updates/" class="md-nav__link">
        Changelog
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../api/" class="md-nav__link">
        1.x Documentation
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#initialization" class="md-nav__link">
    Initialization
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pagerefreshlayout" class="md-nav__link">
    PageRefreshLayout
  </a>
  
    <nav class="md-nav" aria-label="PageRefreshLayout">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#declaration" class="md-nav__link">
    Declaration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-the-list" class="md-nav__link">
    Create the List
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#listen-for-state-changes" class="md-nav__link">
    Listen for State Changes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trigger-refresh" class="md-nav__link">
    Trigger Refresh
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#empty-state" class="md-nav__link">
    Empty State
  </a>
  
    <nav class="md-nav" aria-label="Empty State">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#global-empty-state-configuration" class="md-nav__link">
    Global Empty State Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#singleton-empty-state-configuration" class="md-nav__link">
    Singleton Empty State Configuration
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#refreshing-data" class="md-nav__link">
    Refreshing Data
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#disable-pull-to-refresh-in-empty-state" class="md-nav__link">
    Disable Pull-to-Refresh in Empty State
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>Pull-to-Refresh/Load-more</h1>

<p>The content of this chapter may seem extensive, but the code is actually concise. The detailed explanations are omitted to avoid redundancy.</p>
<p><img src="https://i.loli.net/2021/08/14/lV4ktFRAweYorsC.gif" width="250"/></p>
<p><a href="https://github.com/scwang90/SmartRefreshLayout">SmartRefreshLayout</a> is currently the most powerful refresh framework for Android in terms of extensibility. BRV's pull-to-refresh and load-more functionalities are built on top of SmartRefreshLayout, supporting all its features and adding new ones.
<br></p>
<blockquote>
<p>If you need more customization options for pull-to-refresh or load-more, please refer to the documentation of <a href="https://github.com/scwang90/SmartRefreshLayout">SmartRefreshLayout</a>. <br>
The <code>PageRefreshLayout</code> in this library inherits from <code>SmartRefreshLayout</code>, so it has all its features.</p>
</blockquote>
<p><br>
This library includes the following basic dependencies of SmartRefreshLayout, so there's no need to include them again:</p>
<div class="highlight"><pre><span></span><code><span class="n">api</span><span class="w"> </span><span class="s1">&#39;io.github.scwang90:refresh-layout-kernel:2.0.5&#39;</span>
<span class="n">api</span><span class="w"> </span><span class="s1">&#39;io.github.scwang90:refresh-header-material:2.0.5&#39;</span>
<span class="n">api</span><span class="w"> </span><span class="s1">&#39;io.github.scwang90:refresh-footer-classics:2.0.5&#39;</span>
</code></pre></div>
<p>To specify custom refresh headers and footers for SmartRefreshLayout, you need to include the respective libraries (that's how SmartRefreshLayout is designed):</p>
<p>Optional configurations for refresh headers and footers:</p>
<div class="highlight"><pre><span></span><code><span class="n">implementation</span><span class="w">  </span><span class="s1">&#39;io.github.scwang90:refresh-layout-kernel:2.0.5&#39;</span><span class="w">      </span><span class="c1">// Core dependency (must include)</span>
<span class="n">implementation</span><span class="w">  </span><span class="s1">&#39;io.github.scwang90:refresh-header-classics:2.0.5&#39;</span><span class="w">    </span><span class="c1">// Classic refresh header</span>
<span class="n">implementation</span><span class="w">  </span><span class="s1">&#39;io.github.scwang90:refresh-header-radar:2.0.5&#39;</span><span class="w">       </span><span class="c1">// Radar refresh header</span>
<span class="n">implementation</span><span class="w">  </span><span class="s1">&#39;io.github.scwang90:refresh-header-falsify:2.0.5&#39;</span><span class="w">     </span><span class="c1">// Falsify refresh header</span>
<span class="n">implementation</span><span class="w">  </span><span class="s1">&#39;io.github.scwang90:refresh-header-material:2.0.5&#39;</span><span class="w">    </span><span class="c1">// Material refresh header</span>
<span class="n">implementation</span><span class="w">  </span><span class="s1">&#39;io.github.scwang90:refresh-header-two-level:2.0.5&#39;</span><span class="w">   </span><span class="c1">// Two-level refresh header</span>
<span class="n">implementation</span><span class="w">  </span><span class="s1">&#39;io.github.scwang90:refresh-footer-ball:2.0.5&#39;</span><span class="w">        </span><span class="c1">// Ball pulse load-more</span>
<span class="n">implementation</span><span class="w">  </span><span class="s1">&#39;io.github.scwang90:refresh-footer-classics:2.0.5&#39;</span><span class="w">    </span><span class="c1">// Classic load-more</span>
</code></pre></div>
<h2 id="initialization">Initialization<a class="headerlink" href="#initialization" title="Permanent link">&para;</a></h2>
<p>The refresh layout requires initialization first, and it's recommended to do it in the <code>Application</code> class.</p>
<div class="highlight"><pre><span></span><code><span class="n">SmartRefreshLayout</span><span class="p">.</span><span class="na">setDefaultRefreshHeaderCreator</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="n">layout</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">MaterialHeader</span><span class="p">(</span><span class="k">this</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<span class="n">SmartRefreshLayout</span><span class="p">.</span><span class="na">setDefaultRefreshFooterCreator</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="n">layout</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">ClassicsFooter</span><span class="p">(</span><span class="k">this</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>
<h2 id="pagerefreshlayout">PageRefreshLayout<a class="headerlink" href="#pagerefreshlayout" title="Permanent link">&para;</a></h2>
<p>This control extends from <code>SmartRefreshLayout</code> and adds the following features:</p>
<ol>
<li>Simplified functions</li>
<li>Fine-tuned details</li>
<li>Empty state</li>
<li>Pagination loading</li>
<li>Pull-to-load-more</li>
<li>Pre-loading / Pre-pulling</li>
</ol>
<h3 id="declaration">Declaration<a class="headerlink" href="#declaration" title="Permanent link">&para;</a></h3>
<p>There are two ways to create a <code>PageRefreshLayout</code>, but it's recommended to wrap it in a layout.</p>
<div class="tabbed-set" data-tabs="1:1"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><label for="__tabbed_1_1">Wrap in layout</label><div class="tabbed-content"></div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;com.drake.brv.PageRefreshLayout</span>
<span class="w">    </span><span class="na">xmlns:android=</span><span class="s">&quot;http://schemas.android.com/apk/res/android&quot;</span>
<span class="w">    </span><span class="na">xmlns:tools=</span><span class="s">&quot;http://schemas.android.com/tools&quot;</span>
<span class="w">    </span><span class="na">xmlns:app=</span><span class="s">&quot;http://schemas.android.com/apk/res-auto&quot;</span>
<span class="w">    </span><span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
<span class="w">    </span><span class="na">android:id=</span><span class="s">&quot;@+id/page&quot;</span>
<span class="w">    </span><span class="na">app:stateEnabled=</span><span class="s">&quot;true&quot;</span>
<span class="w">    </span><span class="na">android:layout_height=</span><span class="s">&quot;match_parent&quot;</span>
<span class="w">    </span><span class="na">tools:context=</span><span class="s">&quot;com.drake.brv.sample.fragment.Refresh</span>

<span class="s">Fragment&quot;</span><span class="nt">&gt;</span>

<span class="nt">&lt;androidx.recyclerview.widget.RecyclerView</span>
<span class="w">    </span><span class="na">android:id=</span><span class="s">&quot;@+id/rv&quot;</span>
<span class="w">    </span><span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
<span class="w">    </span><span class="na">android:layout_height=</span><span class="s">&quot;match_parent&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>

<span class="nt">&lt;/com.drake.brv.PageRefreshLayout&gt;</span>
</code></pre></div>
<div class="tabbed-set" data-tabs="2:1"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><label for="__tabbed_2_1">Wrapped in code</label><div class="tabbed-content">
<p>It is only recommended to use layout creation, which can keep the project code readable and avoid unnecessary problems</p>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="kd">val</span><span class="w"> </span><span class="nv">page</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rv</span><span class="p">.</span><span class="na">pageCreate</span><span class="p">()</span>
</code></pre></div>
<h3 id="create-the-list">Create the List<a class="headerlink" href="#create-the-list" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">rv</span><span class="p">.</span><span class="na">linear</span><span class="p">().</span><span class="na">setup</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">addType</span><span class="o">&lt;</span><span class="n">Model</span><span class="o">&gt;</span><span class="p">(</span><span class="n">R</span><span class="p">.</span><span class="na">layout</span><span class="p">.</span><span class="na">item_simple</span><span class="p">)</span>
<span class="w">    </span><span class="n">addType</span><span class="o">&lt;</span><span class="n">DoubleItemModel</span><span class="o">&gt;</span><span class="p">(</span><span class="n">R</span><span class="p">.</span><span class="na">layout</span><span class="p">.</span><span class="na">item_full_span</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">page</span><span class="p">.</span><span class="na">onRefresh</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">postDelayed</span><span class="p">({</span>
<span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getData</span><span class="p">()</span>
<span class="w">        </span><span class="n">addData</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">index</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">total</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="m">2000</span><span class="p">)</span>
<span class="p">}.</span><span class="na">autoRefresh</span><span class="p">()</span>
</code></pre></div>
<ol>
<li><code>onRefresh</code> is the function that will be executed every time the list is refreshed or loaded more.</li>
</ol>
<h3 id="listen-for-state-changes">Listen for State Changes<a class="headerlink" href="#listen-for-state-changes" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">// Pull-to-refresh</span>
<span class="n">page</span><span class="p">.</span><span class="na">onRefresh</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// You can perform network requests or other asynchronous operations here</span>
<span class="p">}</span>

<span class="c1">// Load more</span>
<span class="n">page</span><span class="p">.</span><span class="na">onLoadMore</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// You can perform network requests or other asynchronous operations here</span>
<span class="p">}</span>
</code></pre></div>
<ol>
<li>If you don't call <code>onLoadMore</code>, the pull-to-load-more functionality will also execute the <code>onRefresh</code> function. In most cases, pull-to-refresh and load more use the same API but with different page values.</li>
</ol>
<h3 id="trigger-refresh">Trigger Refresh<a class="headerlink" href="#trigger-refresh" title="Permanent link">&para;</a></h3>
<p>There are three functions to trigger the refresh state (all of them will invoke the <code>onRefresh</code> function):</p>
<table>
<thead>
<tr>
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>autoRefresh</td>
<td>Show the pull-to-refresh animation</td>
</tr>
<tr>
<td>showLoading</td>
<td>Show the loading state with a custom layout</td>
</tr>
<tr>
<td>refresh</td>
<td>Refresh silently without animation</td>
</tr>
<tr>
<td>refreshing</td>
<td>Equivalent to <code>showLoading</code> for the first time. After loading is complete, it's equivalent to <code>refresh</code>.</td>
</tr>
</tbody>
</table>
<blockquote>
<p>All three trigger methods will reset the index to <code>startIndex</code>. The index is the default field for page increment. You will see how to use this field later.</p>
</blockquote>
<h3 id="empty-state">Empty State<a class="headerlink" href="#empty-state" title="Permanent link">&para;</a></h3>
<p>The <code>PageRefreshLayout</code> contains a <code>StateLayout</code> to handle the empty state.</p>
<p>Control the state of the empty state layout (usually handled automatically by the framework):</p>
<table>
<thead>
<tr>
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>showLoading</td>
<td>Show the loading empty state</td>
</tr>
<tr>
<td>showEmpty</td>
<td>Show the empty empty state</td>
</tr>
<tr>
<td>showError</td>
<td>Show the error empty state</td>
</tr>
<tr>
<td>showContent</td>
<td>Show the content view</td>
</tr>
</tbody>
</table>
<h4 id="global-empty-state-configuration">Global Empty State Configuration<a class="headerlink" href="#global-empty-state-configuration" title="Permanent link">&para;</a></h4>
<p>Global empty state configuration is shared with <code>StateLayout</code> because <code>PageRefreshLayout</code> embeds <code>StateLayout</code>.</p>
<div class="highlight"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * Recommended to configure the global empty state in the Application class.</span>
<span class="cm"> * For more details, refer to https://github.com/liangjingkanji/StateLayout.</span>
<span class="cm"> */</span>
<span class="n">StateConfig</span><span class="p">.</span><span class="na">apply</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">emptyLayout</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">R</span><span class="p">.</span><span class="na">layout</span><span class="p">.</span><span class="na">layout_empty</span>
<span class="w">  </span><span class="n">errorLayout</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">R</span><span class="p">.</span><span class="na">layout</span><span class="p">.</span><span class="na">layout_error</span>
<span class="w">  </span><span class="n">loadingLayout</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">R</span><span class="p">.</span><span class="na">layout</span><span class="p">.</span><span class="na">layout_loading</span>

<span class="w">  </span><span class="n">onLoading</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// This callback is triggered when the loading layout is created. You can customize animations or click events here.</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="singleton-empty-state-configuration">Singleton Empty State Configuration<a class="headerlink" href="#singleton-empty-state-configuration" title="Permanent link">&para;</a></h4>
<p>Singleton empty state means that for a specific layout, you want to use a different empty state layout instead of the global configuration. You don't need to specify all of them; you can choose to specify only the loading or error layout.</p>
<div class="tabbed-set" data-tabs="3:1"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><label for="__tabbed_3_1">XML Declaration</label><div class="tabbed-content"></div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;com.drake.brv.PageRefreshLayout</span>
<span class="w">    </span><span class="err">.....</span>
<span class="w">    </span><span class="na">app:error_layout=</span><span class="s">&quot;@layout/layout_error&quot;</span>
<span class="w">    </span><span class="na">app:empty_layout=</span><span class="s">&quot;@layout/layout_empty&quot;</span>
<span class="w">    </span><span class="na">app:loading_layout=</span><span class="s">&quot;@layout/layout_loading&quot;</span><span class="nt">&gt;</span>

<span class="w">    </span><span class="cm">&lt;!--RecyclerView code--&gt;</span>

<span class="nt">&lt;/com.drake.brv.PageRefreshLayout&gt;</span>
</code></pre></div>
<div class="tabbed-set" data-tabs="4:1"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><label for="__tabbed_4_1">Code Declaration</label><div class="tabbed-content"></div>
</div>
<div class="highlight"><pre><span></span><code><span class="n">page</span><span class="p">.</span><span class="na">apply</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">loadingLayout</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">R</span><span class="p">.</span><span class="na">layout</span><span class="p">.</span><span class="na">layout_loading</span>
<span class="w">    </span><span class="n">emptyLayout</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">R</span><span class="p">.</span><span class="na">layout</span><span class="p">.</span><span class="na">layout_empty</span>
<span class="w">    </span><span class="c1">// errorLayout = R.layout.layout_error</span>
<span class="p">}</span>
</code></pre></div>
<p>By default, the empty state will be used. If you</p>
<p>have set the global empty state and don't want to use it at this moment, you can use the <code>stateEnabled</code> property or function.</p>
<p>As the header layout is part of the list and the empty state covers the entire list, if you want to use the empty state without affecting the header layout, you can use <code>CoordinatorLayout</code>.</p>
<blockquote>
<p>Note: Using <code>NestedScrollView</code> to nest the RecyclerView will load all items at once, which consumes more memory. However, nesting the RecyclerView inside a <code>CoordinatorLayout</code> won't have this issue.</p>
</blockquote>
<h3 id="refreshing-data">Refreshing Data<a class="headerlink" href="#refreshing-data" title="Permanent link">&para;</a></h3>
<p>As mentioned earlier, <code>PageRefreshLayout</code> supports automatic pagination. You don't need to use the <code>rv.models</code> function to set the data; instead, you can use <code>addData</code>.</p>
<div class="highlight"><pre><span></span><code><span class="n">pageLayout</span><span class="p">.</span><span class="na">onRefresh</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">scope</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Get</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;/path&quot;</span><span class="p">).</span><span class="na">await</span><span class="p">()</span>
<span class="w">        </span><span class="n">addData</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="na">list</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">adapter</span><span class="p">.</span><span class="na">itemCount</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">data</span><span class="p">.</span><span class="na">count</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>In most cases, the backend defines the first page as 1, but sometimes it can be 0. You can set the initial value of the <code>index</code> field (the field representing the page) in the <code>onCreate</code> method of your <code>Application</code> class.</p>
<div class="highlight"><pre><span></span><code><span class="kd">class</span><span class="w"> </span><span class="nc">App</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Application</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">override</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">onCreate</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">super</span><span class="p">.</span><span class="na">onCreate</span><span class="p">()</span>
<span class="w">        </span><span class="n">PageRefreshLayout</span><span class="p">.</span><span class="na">startIndex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>In the code snippet above, I used another open-source project of mine, <a href="https://github.com/liangjingkanji/Net">Net</a>, for network requests. It can be configured together with BRV.</p>
<blockquote>
<p>If <code>PageRefreshLayout</code> is not directly wrapping the RecyclerView, you need to pass the <code>adapter</code> parameter to the <code>addData</code> function in order to use automatic pagination. Otherwise, an exception will be thrown.</p>
</blockquote>
<h2 id="disable-pull-to-refresh-in-empty-state">Disable Pull-to-Refresh in Empty State<a class="headerlink" href="#disable-pull-to-refresh-in-empty-state" title="Permanent link">&para;</a></h2>
<p>Control the PageRefreshLayout's ability to handle pull-to-refresh gestures when the empty state is displayed.</p>
<table>
<thead>
<tr>
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>refreshEnableWhenEmpty</td>
<td>Enable pull-to-refresh when the empty state is displayed</td>
</tr>
<tr>
<td>refreshEnableWhenError</td>
<td>Enable pull-to-refresh when the error state is displayed</td>
</tr>
</tbody>
</table>
<blockquote>
<p>The corresponding companion object properties are used for global configuration, while the object properties of PageRefreshLayout are used for singleton configuration.</p>
</blockquote>
<p>If you need more complex logic, it is recommended to use <code>PageRefreshLayout.setEnableRefresh()</code> in the empty state callback to have more control.</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <!--
  ~ Copyright (C) 2018 Drake, Inc.
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~ http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->


<!-- Footer -->
<footer class="md-footer">

    <!-- Link to previous and/or next page -->
    
    <nav class="md-footer__inner md-grid" aria-label="">

        <!-- Link to previous page -->
        
        <a href="../state/" class="md-footer__link md-footer__link--prev" rel="prev">
            <div class="md-footer__button md-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
                <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
                    Empty State
                </div>
            </div>
        </a>
        

        <!-- Link to next page -->
        
        <a href="../refresh-animate/" class="md-footer__link md-footer__link--next" rel="next">
            <div class="md-footer__title">
                <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
                    Refresh Animation
                </div>
            </div>
            <div class="md-footer__button md-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
        </a>
        
    </nav>
    

    <!-- Further information -->
    <div class="md-footer-meta md-typeset">
        <div class="md-footer-meta__inner md-grid">

            <!-- Copyright and theme information -->
            <div class="md-footer-copyright">
                
                <a href="https://github.com/liangjingkanji" target="_blank" rel="noopener">
                    <div class="md-footer-copyright__highlight">
                        Copyright &copy; 2018 - 2020 劉強東
                    </div>
                </a>
                
                
            </div>

            <!-- Social links -->
            <div class="md-social">
  
</div>
        </div>
    </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.b4d07000.min.js"></script>
      
    
  </body>
</html>